# Configuration Claude pour Projet Jarvis v1.3.2 

## Contexte du projet (MISE √Ä JOUR POST-AUDIT S√âCURIT√â)
- **Nom** : Jarvis - Assistant IA Personnel Enterprise Security-Hardened
- **Version** : v1.3.2 - Production-Ready avec Audit S√©curit√© Complet + Corrections Appliqu√©es
- **Score Global** : **9.5/10** (TOP 5% industrie) - **AM√âLIOR√â** de 8.2 ‚Üí 9.5
- **Score S√©curit√©** : **95/100** ‚≠ê (Toutes vuln√©rabilit√©s critiques et √©lev√©es corrig√©es)
- **D√©veloppeur** : Enzo, 21 ans, Perpignan
- **Objectif** : Assistant vocal intelligent local avec domotique + Stack DevOps enterprise-grade
- **Stack Core** : FastAPI + React + PostgreSQL + Ollama + Docker + MCP Internet + S√©curit√© JWT/OAuth2
- **Stack DevOps** : Jenkins + ArgoCD + K3s + Prometheus + Grafana + Loki + Monitoring Avanc√©
- **Infrastructure** : Kubernetes production-ready + RBAC + Network Policies

## Instructions permanentes

### üéØ Toujours faire (ORDRE OBLIGATOIRE)
1. **LIRE D'ABORD** : Consulter TOUS les fichiers .md du projet (README.md, CLAUDE.md, etc.)
2. **RECHERCHER** : V√©rifier sur internet si ma solution/approche est optimale et √† jour
3. **PLANIFIER** : Utiliser le TodoWrite pour planifier et suivre les t√¢ches
4. **IMPL√âMENTER** : Respecter l'architecture modulaire existante
5. **TESTER** : Tester les fonctionnalit√©s apr√®s impl√©mentation
6. **DOCUMENTER** : Documenter le code en fran√ßais
7. **METTRE √Ä JOUR** : Toujours mettre √† jour les fichiers .md concern√©s apr√®s chaque action
8. **PRIVIL√âGIER** : Solutions locales (pas de cloud)
9. **MAINTENIR** : Compatibilit√© avec Home Assistant
10. **üìù CHATGPT.md** : **R√àGLE ABSOLUE** - Documenter TOUT dans `/docs/CHATGPT.md` √† 100% (pens√©es, bugs, recherches, demandes Enzo, actions, tests, d√©cisions)

### üöÄ Commandes sp√©ciales Enzo

#### "START JARVIS" - D√âMARRAGE COMPLET
**Quand Enzo dit "start jarvis" :**
1. **LANCER IMM√âDIATEMENT** tous les services Jarvis :
   - Services Docker Core (docker-compose up -d)
   - Backend FastAPI avec m√©triques Prometheus
   - Frontend React cyberpunk
   - Base de donn√©es PostgreSQL + TimescaleDB
   - Redis cache + Qdrant vectoriel
   - Ollama LLM + MCP Internet
   - STT/TTS APIs + Interface
2. **V√âRIFIER** que tout fonctionne :
   - Endpoints API r√©pondent (dont /metrics)
   - Interface web accessible (port 3000)
   - WebSocket connect√© temps r√©el
   - Base donn√©es + m√©moire neuromorphique
   - Services 9/9 healthy
3. **CONFIRMER** : "Jarvis V1.3.0 d√©marr√© et op√©rationnel ‚úÖ"

#### "START DEVOPS" - D√âMARRAGE STACK DEVOPS
**Quand Enzo dit "start devops" :**
1. **LANCER STACK DEVOPS** :
   - cd devops-tools/ && ./start-devops.sh
   - Jenkins CI/CD (port 8080)
   - ArgoCD GitOps K3s (port 8081)
   - Prometheus + Grafana + Loki monitoring
   - AlertManager + Node Exporter + cAdvisor
2. **V√âRIFIER** services DevOps :
   - Cluster K3s op√©rationnel
   - ArgoCD applications sync
   - Monitoring dashboards accessibles
   - M√©triques Jarvis collect√©es
3. **CONFIRMER** : "Stack DevOps Jarvis d√©marr√©e ‚úÖ"

#### "STOP JARVIS" - ARR√äT PROPRE
**Quand Enzo dit "stop jarvis" :**
1. **ARR√äTER PROPREMENT** tous les services :
   - Fermer connexions base donn√©es
   - Arr√™ter serveurs web
   - docker-compose down (graceful)
   - Sauvegarder √©tat si n√©cessaire
2. **V√âRIFIER** arr√™t complet :
   - Ports lib√©r√©s
   - Processus termin√©s
   - Pas de corruption
3. **CONFIRMER** : "Jarvis arr√™t√© proprement ‚úÖ"

### üìã Workflow obligatoire √† chaque demande (MISE √Ä JOUR POST-AUDIT)
1. **üö® LIRE EN PREMIER** `/docs/DOCUMENTATION_JARVIS_POST_AUDIT_2025.md` - Guide s√©curis√© v1.3.2 POST-CORRECTIONS
2. **üõ°Ô∏è LIRE OBLIGATOIRE** `/docs/SECURITY_FIXES_APPLIED_2025.md` - TOUTES les corrections s√©curit√© appliqu√©es  
3. **üë• COORDINATION** `/docs/CLAUDE_INSTANCES_COORDINATION.md` - √âtat instances et r√©servations
4. **LIRE** `/docs/CLAUDE_PARAMS.md` - Param√®tres sp√©cifiques instances Claude
3. **üîç RECHERCHER INTERNET** - **R√àGLE #2 ABSOLUE** : TOUJOURS rechercher meilleures pratiques 2025 avant toute action
4. **LIRE** tous les autres fichiers .md du dossier `/docs/` (OBLIGATOIRE pour coh√©rence)
5. **CONSULTER** `/docs/BUGS.md` pour probl√®mes connus et solutions appliqu√©es
6. **CONSULTER** `/docs/SECURITY_FIXES.md` pour corrections s√©curit√© critiques
7. **VALIDER SOLUTIONS** avec standards industrie 2025 (OWASP, ISO 27001, DORA, CIS)
8. **PLANIFIER** avec TodoWrite bas√© sur recherche internet et audit s√©curit√©
9. **EX√âCUTER** la t√¢che avec solutions valid√©es et s√©curis√©es
10. **METTRE √Ä JOUR** TOUS les fichiers .md pertinents dans `/docs/` (coh√©rence absolue)
11. **METTRE √Ä JOUR** `/docs/BUGS.md` si bugs r√©solus ou nouveaux probl√®mes
12. **METTRE √Ä JOUR** `/docs/CHANGELOG.md` avec modifications (sources + impact s√©curit√©)
13. **METTRE √Ä JOUR** `/docs/ETAT_PROJET_ACTUEL.md` si changements structurels
14. **SYNCHRONISER** tous les .md pour √©viter incoh√©rences entre instances Claude et d√©veloppeurs
15. **VALIDER** que TOUT est coh√©rent, s√©curis√© et √† jour selon standards 2025

### üîß Commandes de test √† ex√©cuter
```bash
# Jarvis Core
docker-compose up -d                                # Stack Jarvis compl√®te
curl http://localhost:8000/health                   # Health check backend
curl http://localhost:8000/metrics                  # M√©triques Prometheus
curl http://localhost:3000                          # Interface React

# DevOps Stack  
cd devops-tools && ./start-devops.sh               # Stack DevOps compl√®te
./start-argocd.sh                                   # ArgoCD K3s seulement

# Monitoring
curl http://localhost:9090/api/v1/targets          # Targets Prometheus
curl http://localhost:3001/api/health              # Health Grafana

# Kubernetes
sudo kubectl get nodes                              # Status cluster K3s
sudo kubectl get pods -n jarvis                    # Pods Jarvis
sudo kubectl get applications -n argocd            # Applications ArgoCD

# Tests base de donn√©es
docker exec -it jarvis_postgres psql -U jarvis -d jarvis_db
docker exec -it jarvis_timescale psql -U jarvis -d timescale_db
```

### üìÅ Structure √† respecter
```
Projet-Jarvis/
‚îú‚îÄ‚îÄ backend/                    # Backend FastAPI + m√©triques Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ config/                # Configuration (config.py)  
‚îÇ   ‚îú‚îÄ‚îÄ db/                    # Base de donn√©es (database.py, init.sql)
‚îÇ   ‚îú‚îÄ‚îÄ memory/                # M√©moire neuromorphique vectorielle
‚îÇ   ‚îú‚îÄ‚îÄ profile/               # Profils utilisateurs (profile_manager.py)
‚îÇ   ‚îú‚îÄ‚îÄ speech/                # Reconnaissance/synth√®se vocale
‚îÇ   ‚îú‚îÄ‚îÄ integration/           # Int√©grations externes (home_assistant.py, ollama_client.py, mcp_client.py)
‚îÇ   ‚îú‚îÄ‚îÄ api/endpoints/         # Routes API (web.py pour endpoints MCP)
‚îÇ   ‚îú‚îÄ‚îÄ services/              # Services m√©tier (web_service.py)
‚îÇ   ‚îî‚îÄ‚îÄ main.py                # Application principale avec /metrics
‚îú‚îÄ‚îÄ devops-tools/              # Stack DevOps professionnelle  
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose-devops.yml  # Services DevOps
‚îÇ   ‚îú‚îÄ‚îÄ start-devops.sh        # Script d√©marrage complet
‚îÇ   ‚îú‚îÄ‚îÄ start-argocd.sh        # Script ArgoCD K3s
‚îÇ   ‚îú‚îÄ‚îÄ jenkins/               # CI/CD (Jenkinsfile, plugins)
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/            # Prometheus + Grafana + Loki
‚îÇ   ‚îú‚îÄ‚îÄ k8s/                   # Manifests Kubernetes
‚îÇ   ‚îî‚îÄ‚îÄ configs/               # Configurations (nginx, etc.)
‚îú‚îÄ‚îÄ services/                  # Microservices (STT, TTS, Interface)
‚îú‚îÄ‚îÄ MCP/                       # Model Context Protocol pour Internet
‚îú‚îÄ‚îÄ docs/                      # Documentation (DEVOPS_GUIDE.md, CHANGELOG.md)
‚îî‚îÄ‚îÄ docker-compose.yml         # Stack Jarvis core
```

### üé® Pr√©f√©rences de d√©veloppement
- **Langue** : Fran√ßais pour les commentaires et logs
- **Style** : Code propre, modulaire, bien document√©
- **S√©curit√©** : Toujours valider les entr√©es utilisateur
- **Performance** : Optimiser pour du mat√©riel local
- **Monitoring** : Logs d√©taill√©s pour debug

### üè† Int√©grations prioritaires
1. **Home Assistant** : Contr√¥le lumi√®res, chauffage, capteurs
2. **MQTT** : Communication temps r√©el
3. **Ollama** : LLM local (LLaMA 3.1)
4. **Whisper** : Reconnaissance vocale
5. **Piper** : Synth√®se vocale fran√ßaise

### üöÄ Fonctionnalit√©s √† impl√©menter (ordre de priorit√©)
1. Reconnaissance vocale avec Whisper
2. Synth√®se vocale avec Piper
3. Int√©gration Ollama compl√®te
4. Connexion Home Assistant
5. Syst√®me de m√©moire contextuelle
6. Interface domotique dans le frontend
7. Automatisations bas√©es sur le contexte
8. Syst√®me de plugins/modules

### üí° Cas d'usage typiques
- "Jarvis, allume la lumi√®re du salon"
- "Jarvis, quelle est la temp√©rature ?"
- "Jarvis, rappelle-moi de sortir le chien √† 15h"
- "Jarvis, lance la musique dans la cuisine"
- "Jarvis, active le mode nuit"

### üîç Debugging
- Toujours v√©rifier les logs dans `./logs/`
- Tester les endpoints avec curl ou Postman
- Utiliser les outils de d√©veloppement React
- Monitorer les performances avec les m√©triques int√©gr√©es

### üìä M√©triques importantes
- Temps de r√©ponse < 500ms
- Pr√©cision reconnaissance vocale > 95%
- Disponibilit√© > 99.5%
- Utilisation m√©moire < 2GB

### üîí S√©curit√©
- Jamais de secrets dans le code
- Validation stricte des entr√©es
- Logs s√©curis√©s (pas de donn√©es sensibles)
- Chiffrement des communications

### üìù Documentation (MISE √Ä JOUR OBLIGATOIRE)
- **README.md** : Toujours √† jour avec les nouvelles fonctionnalit√©s
- **CLAUDE.md** : Mis √† jour avec les nouvelles instructions/configurations
- **Fichiers techniques** : Documentation API, guides d'installation, etc.
- **Commentaires** : En fran√ßais, mis √† jour √† chaque modification
- **Changelog** : Documenter chaque changement important

### üîÑ R√®gles de mise √† jour des fichiers .md
- **Apr√®s chaque impl√©mentation** : Mettre √† jour `/docs/README.md` section concern√©e
- **Apr√®s chaque configuration** : Mettre √† jour `/docs/CLAUDE.md` si n√©cessaire
- **Apr√®s chaque test** : Documenter les r√©sultats et proc√©dures
- **Apr√®s chaque debug** : Ajouter les solutions trouv√©es dans `/docs/BUGS.md`
- **Apr√®s chaque modification** : Mettre √† jour `/docs/CHANGELOG.md`
- **JAMAIS SUPPRIMER** : Ne jamais supprimer de contenu sauf ordre explicite d'Enzo
- **Coh√©rence** : V√©rifier que tous les .md sont coh√©rents entre eux

## Notes sp√©ciales
- Environnement : Arch Linux avec Hyprland
- Mat√©riel : i9-14900KF, RTX 4080, 32GB RAM
- R√©seau : Infrastructure haute performance avec VLANs
- Pr√©f√©rence pour l'auto-h√©bergement et la vie priv√©e