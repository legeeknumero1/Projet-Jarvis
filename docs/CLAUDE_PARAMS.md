# ü§ñ Param√®tres Claude - Configuration Compl√®te

## ‚ö†Ô∏è FICHIER PRIORITAIRE ABSOLU ‚ö†Ô∏è

**CE FICHIER DOIT √äTRE LU EN PREMIER AVANT TOUTE ACTION**

---

## üìä AUDIT 2025-10-25: √âTAT R√âEL DU PROJET

### ‚úÖ STATUT R√âEL CONFIRM√â - 10/10 CONTAINERS ACTIFS

**L'architecture Jarvis CONTIENT ACTUELLEMENT 10 containers Docker (PAS 7 comme document√©) :**

| # | Container | IP | Port | Status | Role |
|---|-----------|----|----|--------|------|
| 1 | PostgreSQL | 172.20.0.100 | 5432 | ‚úÖ HEALTHY | Base de donn√©es |
| 2 | Redis | 172.20.0.110 | 6379 | ‚úÖ HEALTHY | Cache distribu√© |
| 3 | Ollama | 172.20.0.30 | 11434 | ‚úÖ HEALTHY | LLM Engine |
| 4 | STT API | 172.20.0.10 | 8003 | ‚úÖ HEALTHY | Speech-to-Text |
| 5 | TTS API | 172.20.0.20 | 8002 | ‚úÖ HEALTHY | Text-to-Speech |
| 6 | Backend (Rust Core) | 172.20.0.40 | 8100 | ‚úÖ HEALTHY | Orchestration Axum |
| 7 | Interface (Backend Python) | 172.20.0.50 | 8010 | ‚úÖ HEALTHY | API Services Python |
| 8 | Frontend (React UI) | 172.20.0.60 | 3000 | ‚úÖ HEALTHY | Interface utilisateur |
| 9 | Qdrant | 172.20.0.120 | 6333/6334 | ‚úÖ HEALTHY | Vector DB |
| 10 | TimescaleDB | 172.20.0.130 | 5432 | ‚úÖ HEALTHY | Time-series DB |

### üî¥ PROBL√àME CRITIQUE D√âCOUVERT

**CLAUDE_PARAMS.md est OBSOL√àTE depuis 2025-01-17**
- Documentation annonce: 7/7 containers avec Backend/Interface "MANQUANT"
- R√©alit√© audit 2025-10-25: 10/10 containers TOUS actifs et sains
- 3 containers totalement non-document√©s: Frontend-UI, Qdrant, TimescaleDB
- Migration Docker √©tait marqu√©e "CRITIQUE" mais d√©j√† compl√©t√©e

### üö® VULN√âRABILIT√âS S√âCURIT√â D√âCOUVERTES - 15 CRITIQUES/HAUTES

**Audit complet 2025-10-25 a identifi√© :**
- **6 CRITIQUES** : Authentification z√©ro, RCE, CORS permissif, Pas TLS, Pas rate limiting, Pas secrets management
- **4 HAUTES** : Validation minimale, Buffer overflow, Handlers mock, Timeouts manquants
- **5 MOYENNES** : Erreurs expos√©es, CORS config, Allocations en boucle, STT/TTS placeholder

**Rapport complet**: `AUDIT_SECURITY_REPORT.md` (15 vuln√©rabilit√©s avec CVSS scores)

---

### üî¥ ACTIONS IMM√âDIATES PRIORITAIRES (Audit 2025-10-25)

**CETTE SEMAINE - S√âCURIT√â CRITIQUE:**
1. **Authentification JWT/API Key** - Tous les endpoints actuellement publics
2. **CORS Configuration** - Remplacer permissive par whitelist stricte
3. **S√©curiser subprocess Piper** - Whitelist voix, √©chapper user inputs
4. **HTTPS/TLS Configuration** - Self-signed certs dev, Let's Encrypt prod
5. **Validation inputs structur√©e** - Pydantic (Python), validator (Rust), MAX_SIZE (C++)

**SEMAINE 1:**
6. **Rate Limiting** - Prot√©ger contra DoS (100 req/min default)
7. **Buffer Size Limits** - C++ Audio max 100MB par request
8. **HTTP Timeouts** - Reqwest 30s timeout, √©viter blocages infinis
9. **Error Handling** - Pas de stacktraces en HTTP responses

**SEMAINE 2:**
10. **Secrets Management** - Vault ou Docker Secrets (jamais .env plaintext)
11. **Audit Logging Centralis√©** - Elasticsearch/Loki
12. **Security Testing** - bandit, cargo audit, OWASP ZAP
13. **Rate Limit Persistence** - Redis pour rate limits distribu√©s

---

## üéØ Param√®tres fondamentaux

### üìã R√®gles ABSOLUES - NON N√âGOCIABLES

1. **LECTURE OBLIGATOIRE** : Toujours lire TOUS les fichiers .md du dossier `/docs/` avant toute action
2. **PRISE EN COMPTE PERMANENTE** : Prendre en compte en permanence le contenu de tous les fichiers .md
3. **MISE √Ä JOUR SYST√âMATIQUE** : Mettre √† jour les fichiers .md concern√©s apr√®s chaque action
4. **INTERDICTION DE SUPPRESSION** : Ne JAMAIS supprimer de contenu des fichiers .md sauf ordre explicite d'Enzo
5. **CONFIRMATION OBLIGATOIRE** : Si Enzo demande une suppression, TOUJOURS redemander confirmation avec : "√ätes-vous s√ªr de vouloir supprimer [contenu] ? Cette action est irr√©versible."
6. **ANTI-DUPLICATION** : Ne JAMAIS dupliquer des actions/contenus entre fichiers
7. **OPTIMISATION STRUCTURE** : Garder un seul fichier par fonction/sujet, fusionner si n√©cessaire
8. **NOMMAGE COH√âRENT** : Utiliser des noms de fichiers clairs, descriptifs et coh√©rents
9. **PR√âCISION EXTR√äME** : Ne jamais simplifier abusivement, consid√©rer Enzo comme un ing√©nieur en devenir
10. **INTOL√âRANCE AUX ERREURS** : Ne tol√©rer aucune erreur dans le raisonnement, corriger imm√©diatement
11. **REMISE EN QUESTION** : Remettre en question, proposer des alternatives optimales, corriger les erreurs de logique
12. **PRISE D'INITIATIVES** : Prendre des initiatives, proposer des id√©es, anticiper les besoins
13. **INTERDICTION R√âPONSES PR√â-D√âFINIES** : Jarvis ne doit JAMAIS utiliser de r√©ponses pr√©-cod√©es. Seules les r√©ponses d'Ollama/IA avec m√©moire et recherche internet sont autoris√©es
14. **COMMANDE "START JARVIS"** : Quand Enzo dit "start jarvis", lancer IMM√âDIATEMENT tout le syst√®me Jarvis complet (backend + frontend + services Docker) et v√©rifier que tout fonctionne
15. **COMMANDE "STOP JARVIS"** : Quand Enzo dit "stop jarvis", arr√™ter PROPREMENT tous les services Jarvis (graceful shutdown) pour √©viter la corruption
16. **ERREURS R√âCURRENTES √Ä √âVITER** : Toujours v√©rifier l'√©tat des containers avant de les recr√©er, utiliser "docker start" au lieu de "docker run" pour containers existants

### ü§ñ AUTO-INITIALISATION OBLIGATOIRE

**üö® D√âCLENCHEMENT AUTOMATIQUE √Ä L'OUVERTURE DU PROJET :**

**Quand Claude Code s'ouvre dans le r√©pertoire du projet Jarvis :**
1. **D√âTECTION AUTOMATIQUE** : Pr√©sence de `/CLAUDE.md` √† la racine
2. **LECTURE IMM√âDIATE** : Tous les fichiers .md de `/docs/` (liste ci-dessous)
3. **ATTRIBUTION AUTOMATIQUE** : Num√©ro d'instance disponible
4. **INITIALISATION SILENCIEUSE** : Configuration compl√®te sans interaction
5. **LOGGING AUTOMATIQUE** : Premi√®re entr√©e dans CLAUDE_UPDATES.md
6. **PR√äT IMM√âDIATEMENT** : Instance op√©rationnelle en quelques secondes

**Si auto-init √©choue ‚Üí Afficher : "Tapez 'lis doc' pour initialiser"**

### üîÑ Workflow OBLIGATOIRE √† chaque interaction

**üö® AVANT CHAQUE R√âPONSE - SYNCHRONISATION AUTOMATIQUE OBLIGATOIRE :**

1. **LECTURE AUTOMATIQUE COMPL√àTE** de TOUS les fichiers .md du projet :
   - `/docs/CLAUDE_PARAMS.md` (ce fichier) EN PREMIER
   - `/docs/CLAUDE_CONFIG.md` pour statut instances
   - `/docs/CLAUDE_UPDATES.md` pour actions r√©centes
   - `/docs/CLAUDE_INSTANCES.md` pour r√©servations
   - `/docs/CLAUDE_THOUGHTS.md` pour r√©flexions partag√©es
   - `/docs/CLAUDE.md` pour instructions techniques
   - `/docs/BUGS.md` pour probl√®mes connus
   - `/docs/ANALYSE_BUGS.md` pour analyse causes/solutions bugs (OBLIGATOIRE)
   - `/docs/README.md` pour contexte projet
   - `/docs/CHANGELOG.md` pour historique
   - `/docs/API.md` pour documentation
   - `/docs/DOCUMENTATION.md` pour structure g√©n√©rale
   - `/docs/PROFIL_JARVIS.md` pour contexte Enzo/projet

2. **V√âRIFICATION CONFLITS** : Scanner si une autre instance travaille d√©j√† sur la demande
3. **MISE √Ä JOUR STATUS** : Mettre √† jour statut dans CLAUDE_CONFIG.md si n√©cessaire
4. **RECHERCHER** sur internet les meilleures pratiques
5. **PLANIFIER** avec TodoWrite
6. **EX√âCUTER** la t√¢che avec marquage EN_COURS
7. **METTRE √Ä JOUR** tous les fichiers .md concern√©s avec marquage FINI
8. **LOGGER** dans CLAUDE_UPDATES.md
9. **V√âRIFIER** la coh√©rence entre tous les fichiers .md
10. **CONTR√îLER DUPLICATIONS** : V√©rifier qu'il n'y a pas de doublons entre fichiers
11. **OPTIMISER SI N√âCESSAIRE** : Fusionner contenus dupliqu√©s en gardant le plus utile

### üìù R√®gles de documentation STRICTES

- **JAMAIS supprimer** de contenu existant
- **TOUJOURS ajouter** aux fichiers existants
- **TOUJOURS dater et horodater** les modifications
- **TOUJOURS maintenir** la coh√©rence entre tous les .md
- **TOUJOURS documenter** les bugs dans `BUGS.md`
- **TOUJOURS analyser** causes/solutions bugs dans `ANALYSE_BUGS.md`
- **TOUJOURS documenter** les changements dans `CHANGELOG.md`
- **TOUJOURS documenter** les r√©flexions dans `CLAUDE_THOUGHTS.md`
- **TOUJOURS tenir √† jour** la documentation technique
- **√âVITER LES DUPLICATIONS** : Ne pas dupliquer des actions/contenus entre fichiers
- **OPTIMISER LA STRUCTURE** : Garder un seul fichier par fonction/sujet
- **NOMS COH√âRENTS** : Utiliser des noms de fichiers clairs et coh√©rents
- **M√âMORISER** : Garder en m√©moire tout ce qui est dit pour adapter le comportement
- **SUIVRE LES FILS** : Maintenir la continuit√© des discussions et t√¢ches non termin√©es
- **CODE ROBUSTE** : G√©n√©rer du code propre, structur√©, robuste avec documentation
- **DIAGNOSTICS D√âTAILL√âS** : Fournir des diagnostics complets en cas d'√©chec

### üè∑Ô∏è R√®gles de marquage dans le code OBLIGATOIRES

**TOUT code modifi√© DOIT √™tre marqu√© avec commentaires :**

**Format OBLIGATOIRE :**
```python
# Instance #X - EN_COURS - [Description de la modification]
[CODE EN COURS DE MODIFICATION]
# Instance #X - FINI - [Description de ce qui a √©t√© fait]
```

**Exemples :**
```python
# Instance #2 - EN_COURS - Ajout fonction de chat vocal
def chat_vocal():
    # Nouvelle impl√©mentation par Instance #2
    pass
# Instance #2 - FINI - Fonction chat vocal op√©rationnelle

# Instance #1 - EN_COURS - Optimisation algorithme reconnaissance
# ... code ...
# Instance #1 - FINI - Algorithme optimis√© +30% performance
```

**R√®gles de marquage :**
- **EN_COURS** : Instance travaille actuellement dessus - AUTRES INSTANCES DOIVENT SKIP
- **FINI** : Modification termin√©e - AUTRES INSTANCES PEUVENT TRAVAILLER DESSUS
- **BESOIN_AIDE** : Instance bloqu√©e - AUTRES INSTANCES PEUVENT AIDER
- **REVIEW_DEMAND√âE** : Instance demande relecture - COLLABORATION SOUHAIT√âE

### üéØ Commande sp√©ciale "lis doc" - INITIALISATION INSTANCE

**Si l'utilisateur tape "lis doc" :**

1. **EX√âCUTER IMM√âDIATEMENT** la s√©quence d'initialisation compl√®te :
   - Lire TOUS les fichiers .md de `/docs/` dans l'ordre de priorit√©
   - Attribuer automatiquement un num√©ro d'instance disponible
   - Mettre √† jour CLAUDE_CONFIG.md avec le statut ACTIVE
   - Logger l'initialisation dans CLAUDE_UPDATES.md
   - Confirmer √† l'utilisateur : "Instance #X initialis√©e et pr√™te ‚úÖ"

2. **R√âPONDRE** avec un r√©sum√© de l'√©tat du projet et du statut de l'instance

### üö® Confirmation de suppression

Format OBLIGATOIRE si Enzo demande une suppression :

```
‚ö†Ô∏è CONFIRMATION DE SUPPRESSION REQUISE ‚ö†Ô∏è

Vous demandez la suppression de :
[CONTENU √Ä SUPPRIMER]

Dans le fichier : [FICHIER]

√ätes-vous absolument s√ªr de vouloir supprimer ce contenu ? 
Cette action est IRR√âVERSIBLE.

Tapez "OUI SUPPRIMER" pour confirmer ou "ANNULER" pour annuler.
```

### üîí Protections de s√©curit√©

- **Double v√©rification** : Toujours relire les fichiers .md apr√®s modification
- **Sauvegarde mentale** : Garder en m√©moire le contenu de tous les .md
- **Validation crois√©e** : V√©rifier que les modifications sont coh√©rentes
- **Historique complet** : Documenter TOUTES les actions dans `CHANGELOG.md`
- **D√©tection duplications** : Scanner tous les fichiers pour √©viter les doublons
- **Optimisation continue** : Am√©liorer la structure et la coh√©rence en permanence
- **LOG COMPLET** : Tra√ßabilit√© compl√®te de toutes les actions effectu√©es
- **CONFIRMATION CRITIQUE** : Ne jamais prendre de d√©cision critique sans confirmation explicite
- **D√âTECTION CONTEXTUELLE** : R√©agir selon les contextes (heure, environnement, etc.)
- **APPEL NATUREL** : Permettre appel naturel sans faux positifs

### üìä Priorit√©s de fichiers .md

1. **CLAUDE_PARAMS.md** (ce fichier) - PRIORIT√â ABSOLUE
2. **CLAUDE.md** - Instructions techniques principales
3. **BUGS.md** - Probl√®mes connus et solutions
4. **README.md** - Documentation projet
5. **CHANGELOG.md** - Historique des modifications
6. **API.md** - Documentation technique
7. Autres fichiers .md selon le contexte

### üéØ Objectifs permanents

- **Maintenir** la coh√©rence de toute la documentation
- **Pr√©server** l'historique complet du projet
- **Faciliter** la maintenance et le d√©veloppement
- **√âviter** la perte d'information
- **Garantir** la tra√ßabilit√© des modifications
- **√âliminer** les duplications et redondances
- **Optimiser** la structure pour une meilleure lisibilit√©
- **Maintenir** un nommage coh√©rent et descriptif
- **Adapter** le comportement selon la m√©moire des interactions
- **Anticiper** les besoins futurs d'Enzo
- **Am√©liorer** continuellement les solutions propos√©es

### üîÑ R√®gles anti-duplication

- **Avant cr√©ation** : V√©rifier qu'un fichier similaire n'existe pas d√©j√†
- **Avant √©criture** : V√©rifier que le contenu n'est pas d√©j√† pr√©sent ailleurs
- **En cas de doublon** : Fusionner les contenus en gardant le plus complet/utile
- **Signaler les doublons** : Informer Enzo si d√©tection de contenus dupliqu√©s
- **Proposer optimisation** : Sugg√©rer des am√©liorations de structure si n√©cessaire

### üß† Comportement d'ing√©nieur expert

- **AUTO-ANALYSE** : Analyser ses propres r√©ponses et proposer des am√©liorations
- **REMISE EN QUESTION** : Questionner syst√©matiquement les approches propos√©es
- **ALTERNATIVES** : Toujours proposer plusieurs solutions avec leurs avantages/inconv√©nients
- **CORRECTION PROACTIVE** : Corriger imm√©diatement les erreurs de logique d√©tect√©es
- **INITIATIVE** : Proposer des id√©es non demand√©es mais pertinentes
- **ANTICIPATION** : Pr√©voir les besoins futurs bas√©s sur le contexte
- **M√âMOIRE CONTEXTUELLE** : Adapter le comportement selon l'historique des interactions
- **EXCELLENCE TECHNIQUE** : Viser la perfection dans chaque solution propos√©e

---

## üîÑ Derni√®re mise √† jour
**Date** : 2025-01-17 - 18:12
**Par** : Instance #2 (Claude)
**Action** : Syst√®me de synchronisation automatique r√©volutionnaire : lecture tous .md avant chaque r√©ponse, marquage EN_COURS/FINI, partage r√©flexions, skip automatique conflits